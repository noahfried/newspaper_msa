#merge with msahwy
bygis <- join_by(GISJOIN)
gentzkowcensushwy <- left_join(gentzkowcensus, hwy2, bygis)
# gentzkowcensushwy <- gentzkowcensushwy %>%
#   group_by(msa) %>%
#   summarize(across(c(circ, starts_with("circ_polaff"), population), sum, na.rm = TRUE)) %>%
#   ungroup()
# gentzkowcensushwy <- gentzkowcensushwy %>% filter(!is.na(numdailies))
gentzkowcensushwy <- gentzkowcensushwy %>% filter(population!=0)
# Generate new variables for circulation per capita
gentzkowcensushwy <- gentzkowcensushwy %>%
mutate(
circ_per_cap = gentzkowcensushwy$circ / population,
circ_per_cap_r = gentzkowcensushwy$circ_polaff_R / population,
circ_per_cap_d = gentzkowcensushwy$circ_polaff_D / population,
circ_per_cap_i = gentzkowcensushwy$circ_polaff_I / population,
circ_per_cap_none = gentzkowcensushwy$circ_polaff_none / population
)
bymsa <- join_by(msa)
gentzkowcensushwy <- inner_join(gentzkowcensushwy, msahwy)
gentzkowcensushwy <- gentzkowcensushwy %>% mutate(lpop = log(population)) %>%
filter(!is.na(circ_per_cap))
ols <- rlm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols)
ols <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- lm(frac_length_withdrawn ~ circ, data = gentzkowcensushwy)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- lm(frac_length_withdrawn ~ circ, data = gentzkowcensushwy)
summary(ols3)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- lm(frac_length_withdrawn ~ circ_per_cap_R, data = gentzkowcensushwy)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- lm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols1 <- rlm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- lm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols1 <- rlm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- rlm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <- rlm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
data <- read_delim(file.path("data/30261-0005-Data.tsv"))
head(data)
data <- data %>% filter(starts_with(recid))
data <- read_delim(file.path("data/30261-0005-Data.tsv"))
head(data)
# data <- data %>% filter(starts_with(recid))
data2 <- read_delim(file.path("data/30261-0002-Data.tsv"))
glimpse(data2)
View(data2)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <-rlm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <-rlm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = gentzkowcensushwy)
summary(ols4)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = gentzkowcensushwy)
View(combined)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
View(data1)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal == withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal = withdrawal)
library(tidyverse)
library("ivreg")
library(MASS)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km)
head(data1)
library(tidyverse)
library("ivreg")
library(MASS)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("ivreg")
library(MASS)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
glimpse(read_csv(file.path(folder, "hwys2msa.csv")))
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(smsacode, length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(smsacode, length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length = length_msa_km, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
rename(msa = smsacode, length = length_msa_km)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
rename(msa = smsacode, length = length_msa_km)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
rename(msa = smsacode, length = length_msa_km)
glimpse(data1)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
data1 <- data1.rename(msa = smsacode, length = length_msa_km)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
data1 <- data1 %>% rename(msa = smsacode, length = length_msa_km)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv"))
data1 <- data1 %>% rename(msa = smsacode, length = length_msa_km)
glimpse(data1)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
rename(msa = smsacode, length = length_msa_km)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa, length, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1)
data1 <- data1 %>% select(msa, length, withdrawal)
glimpse(data1)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
data1 <- data1 %>% select(msa, length, withdrawal)
data1 <- data1 %>% select(msa, length, withdrawal)
glimpse(data1)
colnames(data1)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
data1 <- data1 %>% select(msa, length, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("ivreg")
library(MASS)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
data1 <- data1 %>% select(msa, length, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("ivreg")
library(MASS)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
rename(msa = smsacode)
data1 <- data1 %>% select(msa, length, withdrawal)
library(tidyverse)
library("ivreg")
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("ivreg")
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library("ivreg")
#Read in first dataset, withdrawn
folder <- "data"
data1 <- read_csv(file.path(folder, "hwys2msa.csv")) %>%
filter(withdrawal == 1) %>%
select(msa = smsacode, length, withdrawal)
#Read in second dataset, completed
data2 <- read_csv(file.path(folder, "pr5112msa.csv")) %>%
filter(!is.na(smsacode),OPEN90!= 0) %>%
select(msa = smsacode, length = length_in_km, starts_with("OPEN")) %>%
mutate(withdrawal = 0)
withdrawncombined <- bind_rows(data1, data2)
#sort
withdrawncombined <- arrange(withdrawncombined, msa, withdrawal)
withdrawncombined <- withdrawncombined %>%
group_by(msa) %>%
mutate(has_withdraw = max(withdrawal)) %>%
ungroup()
withdrawncombined <- withdrawncombined %>%
group_by(msa, withdrawal) %>%
summarize(length = sum(length, na.rm = TRUE), .groups = 'drop')
# Calculate total length for each msa
withdrawncombined <- withdrawncombined %>%
group_by(msa) %>%
mutate(total_length = sum(length, na.rm = TRUE)) %>%
ungroup()
# Generate frac_length and handle precision issues
withdrawncombined <- withdrawncombined %>%
mutate(frac_length = length / total_length,
frac_length = ifelse(frac_length > 0.9999, 1, frac_length))
# Sort by msa and descending withdrawal
withdrawncombined <- withdrawncombined %>%
arrange(msa, desc(withdrawal))
# Tagging the first occurrence of each msa
withdrawncombined <- withdrawncombined %>%
group_by(msa) %>%
filter(row_number() == 1) %>%
ungroup()
# Replace frac_length with 0 where withdrawal is 0
withdrawncombined <- withdrawncombined %>%
mutate(frac_length = ifelse(withdrawal == 0, 0, frac_length))
# Drop columns withdrawal, tag, and length
msahwy <- withdrawncombined %>%
select(-withdrawal, -length) %>%
rename(frac_length_withdrawn = frac_length)
# Save the final dataframe to a CSV file
write_csv(msahwy, file.path(folder, "msahwy.csv"))
# Display the final dataframe
print(msahwy)
glimpse(msahwy)
gentzkowcensus <- read_csv(file.path(folder, "MergedGentzkowCensus.csv"))
#add circulation data
gentzkow <- read.delim(file.path(folder, "30261-0007-Data.tsv"))
gentzkow <- gentzkow %>% filter(year == 1960) %>% select(citypermid, numdailies, circ, circ_polaff_R, circ_polaff_I, circ_polaff_D, circ_polaff_none, circ_exlast, circ_exnext)
gentzkowcensus <- left_join(gentzkowcensus, gentzkow, by = join_by(citypermid))
gentzkowcensus <- rename(gentzkowcensus, msa = smsacode)
gentzkowcensus <- read_csv(file.path(folder, "MergedGentzkowCensus.csv"))
#add circulation data
gentzkow <- read.delim(file.path(folder, "30261-0007-Data.tsv"))
gentzkow <- gentzkow %>% filter(year == 1960) %>% select(citypermid, numdailies, circ, circ_polaff_R, circ_polaff_I, circ_polaff_D, circ_polaff_none, circ_exlast, circ_exnext)
gentzkowcensus <- left_join(gentzkowcensus, gentzkow, by = join_by(citypermid))
gentzkowcensus <- rename(gentzkowcensus, msa = smsacode)
#merge with hwys2 and msahwy
# bygis <- join_by(GISJOIN)
# gentzkowcensushwy <- left_join(gentzkowcensus, hwy2, bygis)
# gentzkowcensushwy <- gentzkowcensushwy %>% filter(!is.na(numdailies))
gentzkowcensushwy <- gentzkowcensushwy %>% filter(population!=0)
gentzkowcensus <- read_csv(file.path(folder, "MergedGentzkowCensus.csv"))
#add circulation data
gentzkow <- read.delim(file.path(folder, "30261-0007-Data.tsv"))
gentzkow <- gentzkow %>% filter(year == 1960) %>% select(citypermid, numdailies, circ, circ_polaff_R, circ_polaff_I, circ_polaff_D, circ_polaff_none, circ_exlast, circ_exnext)
gentzkowcensus <- left_join(gentzkowcensus, gentzkow, by = join_by(citypermid))
gentzkowcensus <- rename(gentzkowcensus, msa = smsacode)
#add population information
population <- read_csv(file.path("data/nhgis0034_csv/nhgis0034_ds94_1970_place.csv")) %>%
select(GISJOIN, population = CBC001)
# merge with hwys2 and msahwy
bygis <- join_by(GISJOIN)
gentzkowcensushwy <- left_join(gentzkowcensus, population, bygis)
gentzkowcensushwy <- gentzkowcensushwy %>% filter(!is.na(numdailies))
gentzkowcensushwy <- gentzkowcensushwy %>% filter(population!=0)
# Generate new variables for circulation per capita
gentzkowcensushwy <- gentzkowcensushwy %>%
mutate(
circ_per_cap = gentzkowcensushwy$circ / population,
circ_per_cap_r = gentzkowcensushwy$circ_polaff_R / population,
circ_per_cap_d = gentzkowcensushwy$circ_polaff_D / population,
circ_per_cap_i = gentzkowcensushwy$circ_polaff_I / population,
circ_per_cap_none = gentzkowcensushwy$circ_polaff_none / population
)
bymsa <- join_by(msa)
gentzkowcensushwy <- inner_join(gentzkowcensushwy, msahwy)
gentzkowcensushwy <- gentzkowcensushwy %>% mutate(lpop = log(population)) %>%
filter(!is.na(circ_per_cap))
glimpse(gentzkowcensushwy)
View(gentzkowcensushwy)
# merge with hwys2 and msahwy
bygis <- join_by(GISJOIN)
gentzkowcensushwy <- left_join(gentzkowcensus, population, bygis) %>%
filter(!is.na(numdailies)) %>%
filter(population!=0)
# Generate new variables for circulation per capita
gentzkowcensushwy <- gentzkowcensushwy %>%
mutate(
circ_per_cap = gentzkowcensushwy$circ / population,
circ_per_cap_r = gentzkowcensushwy$circ_polaff_R / population,
circ_per_cap_d = gentzkowcensushwy$circ_polaff_D / population,
circ_per_cap_i = gentzkowcensushwy$circ_polaff_I / population,
circ_per_cap_none = gentzkowcensushwy$circ_polaff_none / population
)
bymsa <- join_by(msa)
gentzkowcensushwy <- inner_join(gentzkowcensushwy, msahwy) %>%
mutate(lpop = log(population)) %>%
filter(!is.na(circ_per_cap))
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = gentzkowcensushwy)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = gentzkowcensushwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = gentzkowcensushwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = gentzkowcensushwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = gentzkowcensushwy)
summary(ols4)
gentzkowcensus <- read_csv(file.path(folder, "MergedGentzkowCensus.csv"))
#add circulation data
gentzkow <- read.delim(file.path(folder, "30261-0007-Data.tsv")) %>%
filter(year == 1960) %>%
select(citypermid, numdailies, circ, circ_polaff_R, circ_polaff_I, circ_polaff_D, circ_polaff_none, circ_exlast, circ_exnext)
gentzkowcensus <- left_join(gentzkowcensus, gentzkow, by = join_by(citypermid)) %>%
rename(msa = smsacode)
#add population information
population <- read_csv(file.path("data/nhgis0034_csv/nhgis0034_ds94_1970_place.csv")) %>%
select(GISJOIN, population = CBC001)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
# merge with hwys2 and msahwy
bygis <- join_by(GISJOIN)
gentzkowcensushwy <- left_join(gentzkowcensus, population, bygis) %>%
filter(!is.na(numdailies)) %>%
filter(population!=0)
# Generate new variables for circulation per capita
gentzkowcensushwy <- gentzkowcensushwy %>%
mutate(
circ_per_cap = gentzkowcensushwy$circ / population,
circ_per_cap_r = gentzkowcensushwy$circ_polaff_R / population,
circ_per_cap_d = gentzkowcensushwy$circ_polaff_D / population,
circ_per_cap_i = gentzkowcensushwy$circ_polaff_I / population,
circ_per_cap_none = gentzkowcensushwy$circ_polaff_none / population
)
bymsa <- join_by(msa)
gentzkowcensushwy <- inner_join(gentzkowcensushwy, msahwy) %>%
mutate(lpop = log(population)) %>%
filter(!is.na(circ_per_cap))
#final dataframe will be named news_hwy for ease of reference
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
# merge with hwys2 and msahwy
bygis <- join_by(GISJOIN)
gentzkowcensushwy <- left_join(gentzkowcensus, population, bygis) %>%
filter(!is.na(numdailies)) %>%
filter(population!=0)
# Generate new variables for circulation per capita
gentzkowcensushwy <- gentzkowcensushwy %>%
mutate(
circ_per_cap = gentzkowcensushwy$circ / population,
circ_per_cap_r = gentzkowcensushwy$circ_polaff_R / population,
circ_per_cap_d = gentzkowcensushwy$circ_polaff_D / population,
circ_per_cap_i = gentzkowcensushwy$circ_polaff_I / population,
circ_per_cap_none = gentzkowcensushwy$circ_polaff_none / population
)
bymsa <- join_by(msa)
gentzkowcensushwy <- inner_join(gentzkowcensushwy, msahwy) %>%
mutate(lpop = log(population)) %>%
filter(!is.na(circ_per_cap))
#final dataframe will be named news_hwy for ease of reference
news_hwy <- gentzkowcensushwy
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = newspaper_hwy)
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = news_hwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = news_hwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = news_hwy)
summary(ols4)
summary(lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop + total_length, data = gentzkowcensushwy))
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = news_hwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = news_hwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = news_hwy)
summary(ols4)
summary(lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop + population, data = gentzkowcensushwy))
ols1 <- lm(frac_length_withdrawn ~ circ_per_cap, data = news_hwy)
summary(ols1)
ols2 <- lm(frac_length_withdrawn ~ circ_per_cap + lpop, data = news_hwy)
summary(ols2)
ols3 <-lm(frac_length_withdrawn ~ circ_per_cap_r, data = news_hwy)
summary(ols3)
ols4 <- lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop, data = news_hwy)
summary(ols4)
summary(lm(frac_length_withdrawn ~ circ_per_cap + circ_per_cap_r + circ_per_cap_d + circ_per_cap_i + lpop + numdailies, data = gentzkowcensushwy))
view(data2)
knitr::opts_chunk$set(echo = TRUE)
data <- read_delim(file.path("data/30261-0005-Data.tsv"))
head(data)
# data <- data %>% filter(starts_with(recid))
ads <- read_delim(file.path("data/30261-0002-Data.tsv"))
glimpse(ads)
view(ads)
